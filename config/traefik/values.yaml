installCRDS: true
service:
  type: LoadBalancer

providers:
  kubernetesCRD:
    enabled: true

# Enable TLS support
ssl:
  enabled: true
  
# Middleware for HTTPS redirection with exception for ACME challenges
additionalArguments:
  - "--entrypoints.web.http.middlewares=acme-middleware@kubernetescrd"
  - "--entrypoints.web.http.middlewares.acme-middleware.redirectscheme.scheme=https"
  - "--entrypoints.web.http.middlewares.acme-middleware.redirectscheme.permanent=true"
  - "--entrypoints.websecure.http.tls.certResolver=le"
  
ports:
  web:
    port: 8000
    expose: {}  # Changed from boolean to empty object
    exposedPort: 80
  websecure:
    port: 8443
    expose: {}  # Changed from boolean to empty object
    exposedPort: 443

# Resource limits
resources:
  requests:
    cpu: "100m"
    memory: "50Mi"
  limits:
    cpu: "300m"
    memory: "150Mi"
